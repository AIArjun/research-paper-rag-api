version: "3.9"

services:
  rag-api:
    build: .
    container_name: research-paper-rag-api
    ports:
      - "8001:8001"
    environment:
      - LLM_PROVIDER=${LLM_PROVIDER:-demo}
      - LLM_MODEL=${LLM_MODEL:-gpt-4o-mini}
      - OPENAI_API_KEY=${OPENAI_API_KEY:-}
      - OLLAMA_URL=${OLLAMA_URL:-http://host.docker.internal:11434}
      - EMBEDDING_MODEL=all-MiniLM-L6-v2
      - LOG_LEVEL=INFO
    volumes:
      - ./vectorstore:/app/vectorstore
      - ./uploads:/app/uploads
    restart: unless-stopped
